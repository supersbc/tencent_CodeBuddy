# 🎯 TDSQL 智能规划系统 v3.2 融合版使用指南

## 📋 版本说明

**版本**: v3.2 融合版  
**更新时间**: 2025-10-25  
**核心改进**: 将手动输入和文件上传功能融合，以手动输入为主，文件上传为辅助

---

## 🌟 核心特性

### 1. 智能融合设计
- ✅ **手动输入为主体** - 完整的参数配置表单
- ✅ **文件上传为辅助** - 快速提取参数填充表单
- ✅ **灵活补充修改** - 自动填充后可手动调整
- ✅ **一键分析** - 统一的分析入口

### 2. 双模式支持
- **简化模式**: 6个核心参数，快速评估
- **专业模式**: 20+ 详细参数，精准规划

### 3. 多格式识别
- Excel (.xlsx, .xls)
- JSON (.json)
- 图片 (.png, .jpg, .jpeg, .gif, .bmp)
- PDF (.pdf)

---

## 🚀 使用流程

### 方式一：纯手动输入

1. **选择模式**
   - 简化模式：适合快速评估
   - 专业模式：适合详细规划

2. **填写参数**
   - 所有必填项都有默认值
   - 根据实际情况修改参数

3. **开始分析**
   - 点击"开始分析"按钮
   - 查看架构推荐结果

### 方式二：文件辅助填充（推荐）

1. **上传文件**
   ```
   点击右侧"选择文件上传"按钮
   ↓
   选择包含参数的文件
   ↓
   系统自动识别文件类型
   ```

2. **提取参数**
   ```
   点击"提取并填充表单"按钮
   ↓
   系统自动识别并填充参数
   ↓
   已填充字段会短暂高亮显示
   ```

3. **检查补充**
   ```
   检查自动填充的参数
   ↓
   手动修改或补充缺失项
   ↓
   确保所有必填项完整
   ```

4. **开始分析**
   ```
   点击"开始分析"按钮
   ↓
   查看架构推荐和资源配置
   ```

---

## 📊 界面布局

### 左侧：表单区域（主体）
```
┌─────────────────────────────────┐
│  📝 业务参数配置                │
│                                 │
│  ○ 简化模式  ○ 专业模式        │
│                                 │
│  ┌─ 基础信息 ─────────────┐    │
│  │ 行业类型: [金融 ▼]      │    │
│  │ QPS: [5000]             │    │
│  │ 数据量: [100] GB        │    │
│  └─────────────────────────┘    │
│                                 │
│  ┌─ 性能要求 ─────────────┐    │
│  │ 并发用户: [1000]        │    │
│  │ 可用性: [99.99] %       │    │
│  └─────────────────────────┘    │
│                                 │
│  [🔄 清空表单] [🔍 开始分析]   │
└─────────────────────────────────┘
```

### 右侧：文件辅助区
```
┌─────────────────────────────────┐
│  📁 智能文件识别                │
│                                 │
│  上传文件自动提取参数，         │
│  快速填充表单                   │
│                                 │
│  [📤 选择文件上传]              │
│                                 │
│  支持: Excel, JSON, 图片, PDF   │
│                                 │
│  ┌─ 文件信息 ──────────────┐   │
│  │ 📄 文件: config.json     │   │
│  │ 📊 大小: 1.2 KB          │   │
│  │ 🔍 识别: 文件解析        │   │
│  │ [✨ 提取并填充表单]      │   │
│  └──────────────────────────┘   │
│                                 │
│  💡 使用提示                    │
│  • 上传文件后点击提取           │
│  • 系统自动识别并填入           │
│  • 可手动修改或补充             │
│                                 │
│  📥 Excel 模板                  │
│  [下载模板文件]                 │
└─────────────────────────────────┘
```

---

## 💡 使用场景

### 场景 1: 快速评估
**适用**: 初步了解架构需求

**步骤**:
1. 选择"简化模式"
2. 填写 6 个核心参数
3. 点击"开始分析"

**时间**: < 2 分钟

### 场景 2: 详细规划
**适用**: 正式项目架构设计

**步骤**:
1. 选择"专业模式"
2. 填写 20+ 详细参数
3. 点击"开始分析"

**时间**: 5-10 分钟

### 场景 3: 文件导入（推荐）
**适用**: 已有参数文档或配置文件

**步骤**:
1. 准备包含参数的文件（Excel/JSON/图片/PDF）
2. 上传文件
3. 点击"提取并填充表单"
4. 检查并补充参数
5. 点击"开始分析"

**时间**: < 3 分钟

### 场景 4: 多系统环境
**适用**: 需要分析多个系统

**步骤**:
1. 下载 Excel 模板
2. 填写多个系统的参数
3. 上传 Excel 文件
4. 系统批量分析

**时间**: 根据系统数量

---

## 📁 文件格式说明

### Excel 格式
```excel
参数名称        | 参数值
----------------|--------
industry        | 金融
qps             | 5000
data_volume     | 100
concurrent_users| 1000
availability    | 99.99
```

### JSON 格式
```json
{
  "industry": "金融",
  "qps": 5000,
  "data_volume": 100,
  "concurrent_users": 1000,
  "availability": 99.99
}
```

### 图片格式
- 包含参数信息的架构图
- 需求文档截图
- 配置界面截图

**识别方式**:
- 优先使用 OCR 识别文字
- 降级到基础图像分析

### PDF 格式
- 架构设计文档
- 需求说明文档
- 技术方案文档

**识别方式**:
- 提取前 5 页文本
- 智能识别关键参数

---

## 🎨 界面特性

### 1. 智能高亮
- 文件填充的字段会短暂高亮（绿色背景）
- 持续 2 秒后恢复正常

### 2. 实时验证
- 必填项自动验证
- 数字范围检查
- 格式正确性检查

### 3. 状态提示
- 文件上传成功：边框变绿
- 参数填充完成：显示通知
- 分析进行中：显示加载动画

### 4. 结果展示
- 架构推荐卡片
- 资源配置详情
- 优化建议列表
- 完整数据查看

---

## 🔧 参数说明

### 简化模式参数（6个）

| 参数 | 说明 | 默认值 | 范围 |
|------|------|--------|------|
| 行业类型 | 业务所属行业 | 金融 | 下拉选择 |
| QPS | 每秒查询数 | 5000 | 1-1000000 |
| 数据量 | 总数据量(GB) | 100 | 1-100000 |
| 并发用户 | 同时在线用户 | 1000 | 1-1000000 |
| 可用性 | 系统可用性(%) | 99.99 | 90-100 |
| 读写比 | 读写操作比例 | 7:3 | 下拉选择 |

### 专业模式参数（20+）

**基础信息**:
- 行业类型
- 业务类型
- 系统名称
- 部署区域

**性能要求**:
- QPS
- TPS
- 并发用户数
- 响应时间要求

**数据规模**:
- 当前数据量
- 预期增长率
- 单表最大记录数
- 热数据占比

**可靠性要求**:
- 可用性目标
- RTO（恢复时间目标）
- RPO（恢复点目标）
- 数据一致性要求

**其他要求**:
- 读写比例
- 事务复杂度
- 是否需要分布式事务
- 特殊功能需求

---

## 📊 结果解读

### 架构推荐
```
🏗️ 推荐架构
├─ 架构类型: 分布式集群
├─ 节点数量: 3
├─ 分片数量: 4
├─ 副本数量: 2
└─ 置信度: 85.6%
```

**说明**:
- **架构类型**: 单机/主从/分布式
- **节点数量**: 建议的服务器数量
- **分片数量**: 数据分片数
- **副本数量**: 每个分片的副本数
- **置信度**: 推荐的可信度

### 资源配置
```
💻 资源配置
├─ CPU: 16 核
├─ 内存: 64 GB
├─ 存储: 500 GB SSD
└─ 网络: 10 Gbps
```

### 优化建议
```
💡 优化建议
• 性能优化: 建议配置 SSD 存储提升 I/O 性能
• 可靠性: 建议配置自动故障切换
• 扩展性: 预留 30% 资源用于未来扩展
```

---

## 🎯 最佳实践

### 1. 文件准备
- ✅ 使用标准模板
- ✅ 参数命名规范
- ✅ 数值单位统一
- ✅ 格式正确无误

### 2. 参数填写
- ✅ 基于实际业务
- ✅ 考虑未来增长
- ✅ 预留扩展空间
- ✅ 平衡成本性能

### 3. 结果应用
- ✅ 参考推荐方案
- ✅ 结合实际情况
- ✅ 进行压力测试
- ✅ 持续优化调整

---

## 🔄 工作流程示例

### 完整流程
```
1. 准备阶段
   ├─ 收集业务需求
   ├─ 整理参数信息
   └─ 准备文件（可选）

2. 输入阶段
   ├─ 选择输入模式
   ├─ 上传文件（可选）
   ├─ 提取并填充
   └─ 检查补充参数

3. 分析阶段
   ├─ 提交分析请求
   ├─ 系统智能计算
   └─ 生成推荐方案

4. 应用阶段
   ├─ 查看分析结果
   ├─ 评估推荐方案
   ├─ 调整优化参数
   └─ 确定最终架构
```

---

## 🆚 版本对比

### v3.2 融合版 vs v3.1

| 特性 | v3.1 | v3.2 融合版 |
|------|------|-------------|
| 手动输入 | ✅ 独立标签页 | ✅ 主体界面 |
| 文件上传 | ✅ 独立标签页 | ✅ 辅助功能 |
| 参数填充 | ❌ 不支持 | ✅ 自动填充 |
| 手动补充 | ✅ 支持 | ✅ 支持 |
| 界面布局 | 分离式 | 融合式 |
| 使用便捷性 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |

### 主要改进
1. ✅ **统一入口** - 一个界面完成所有操作
2. ✅ **智能填充** - 文件识别后自动填充表单
3. ✅ **灵活补充** - 自动填充后可手动调整
4. ✅ **视觉优化** - 更清晰的布局和提示
5. ✅ **操作简化** - 减少标签页切换

---

## 📞 技术支持

### 访问地址
- **主界面**: http://127.0.0.1:5173
- **旧版界面**: http://127.0.0.1:5173/old
- **测试页面**: http://127.0.0.1:5173/test_upload.html

### API 接口
- **健康检查**: GET /api/health
- **参数配置**: GET /api/parameter_config?mode=simplified
- **文件分析**: POST /api/analyze
- **预测分析**: POST /api/predict
- **模型库**: GET /api/model_libraries
- **训练统计**: GET /api/training_stats

### 常见问题

**Q: 文件上传后没有反应？**
A: 检查文件格式是否支持，查看浏览器控制台错误信息

**Q: 参数填充不完整？**
A: 文件识别可能不完整，请手动补充缺失参数

**Q: 分析结果不准确？**
A: 确保输入参数准确，可切换到专业模式提供更多信息

**Q: 如何保存分析结果？**
A: 可以复制完整 JSON 数据，或截图保存结果

---

## 🎉 总结

### 核心优势
1. **操作简单** - 一个界面完成所有操作
2. **智能高效** - 文件识别自动填充
3. **灵活可控** - 自动填充后可手动调整
4. **功能完整** - 支持多种输入方式

### 适用场景
- ✅ 快速架构评估
- ✅ 详细方案设计
- ✅ 批量系统分析
- ✅ 参数文件导入

### 使用建议
1. 优先使用文件上传辅助填充
2. 检查并补充自动填充的参数
3. 根据实际情况选择模式
4. 参考推荐结果进行优化

---

**版本**: v3.2 融合版  
**更新时间**: 2025-10-25  
**状态**: ✅ 已上线运行
