# ğŸ“ è‡ªå®šä¹‰æ¨¡å‹åº“ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ¦‚è¿°

ç°åœ¨æ‚¨å¯ä»¥åˆ›å»ºå’Œç®¡ç†è‡ªå·±çš„TDSQLæ¶æ„é¢„æµ‹æ¨¡å‹åº“ï¼ŒåŸºäºæ‚¨çš„å®é™…é¡¹ç›®ç»éªŒæ„å»ºä¸“å±çš„é¢„æµ‹æ¨¡å‹ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- âœ… **åˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹åº“** - æ ¹æ®æ‚¨çš„éœ€æ±‚åˆ›å»ºä¸“å±æ¨¡å‹åº“
- âœ… **æ·»åŠ å®é™…æ¡ˆä¾‹** - å°†æ‚¨çš„çœŸå®é¡¹ç›®ç»éªŒæ·»åŠ åˆ°æ¨¡å‹åº“
- âœ… **å¯¼å…¥å¯¼å‡º** - æ–¹ä¾¿åœ°åˆ†äº«å’Œå¤‡ä»½æ¨¡å‹åº“
- âœ… **ç‹¬ç«‹ç®¡ç†** - ä¸é¢„ç½®æ¨¡å‹åº“å¹¶å­˜ï¼Œäº’ä¸å¹²æ‰°
- âœ… **æŒç»­ä¼˜åŒ–** - éšæ—¶æ·»åŠ æ–°æ¡ˆä¾‹ï¼Œä¸æ–­æå‡å‡†ç¡®ç‡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1: Webç•Œé¢ï¼ˆæ¨èï¼‰

#### 1ï¸âƒ£ åˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹åº“

1. è®¿é—®æ¨¡å‹åº“ç®¡ç†é¡µé¢
   ```
   http://localhost:5003/model_library
   ```

2. ç‚¹å‡» **"â• åˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹åº“"** æŒ‰é’®

3. å¡«å†™æ¨¡å‹åº“ä¿¡æ¯ï¼š
   - **åç§°**: ä¾‹å¦‚"æˆ‘çš„é‡‘èæ¨¡å‹åº“"
   - **æè¿°**: ç®€è¦è¯´æ˜ç”¨é€”å’Œç‰¹ç‚¹
   - **è¡Œä¸šç±»å‹**: é€‰æ‹©é€‚åˆçš„è¡Œä¸š
   - **ä½œè€…**: æ‚¨çš„åå­—æˆ–å›¢é˜Ÿåç§°
   - **ç‰ˆæœ¬å·**: ä¾‹å¦‚"v1.0.0"

4. ç‚¹å‡» **"åˆ›å»º"** å®Œæˆ

#### 2ï¸âƒ£ æ·»åŠ æ¡ˆä¾‹åˆ°è‡ªå®šä¹‰åº“

**æ–¹å¼A: é€šè¿‡é¢„æµ‹ç»“æœæ·»åŠ **
1. åœ¨ä¸»é¡µè¿›è¡Œæ¶æ„é¢„æµ‹
2. æŸ¥çœ‹é¢„æµ‹ç»“æœ
3. å¦‚æœç»“æœå‡†ç¡®ï¼Œå¯ä»¥ä¿å­˜ä¸ºæ¡ˆä¾‹
4. é€‰æ‹©ä¿å­˜åˆ°æ‚¨çš„è‡ªå®šä¹‰æ¨¡å‹åº“

**æ–¹å¼B: é€šè¿‡APIæ·»åŠ **ï¼ˆè§ä¸‹æ–‡Pythonç¤ºä¾‹ï¼‰

#### 3ï¸âƒ£ ä½¿ç”¨è‡ªå®šä¹‰æ¨¡å‹åº“

1. åœ¨æ¨¡å‹åº“ç®¡ç†é¡µé¢æ‰¾åˆ°æ‚¨çš„è‡ªå®šä¹‰åº“
2. ç‚¹å‡» **"ä½¿ç”¨æ­¤æ¨¡å‹åº“"**
3. ç³»ç»Ÿè‡ªåŠ¨åŠ è½½æ‚¨çš„æ¡ˆä¾‹
4. è¿”å›ä¸»é¡µå¼€å§‹é¢„æµ‹

#### 4ï¸âƒ£ å¯¼å‡ºå’Œåˆ†äº«

1. ç‚¹å‡»è‡ªå®šä¹‰åº“çš„ **"å¯¼å‡º"** æŒ‰é’®
2. ä¸‹è½½JSONæ–‡ä»¶
3. åˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜æˆ–å¤‡ä»½

#### 5ï¸âƒ£ å¯¼å…¥æ¨¡å‹åº“

1. ç‚¹å‡» **"ğŸ“¥ å¯¼å…¥æ¨¡å‹åº“"** æŒ‰é’®
2. é€‰æ‹©JSONæ–‡ä»¶
3. ç‚¹å‡» **"å¯¼å…¥"**
4. æ¨¡å‹åº“è‡ªåŠ¨æ·»åŠ åˆ°åˆ—è¡¨

---

### æ–¹æ³•2: Pythonè„šæœ¬

#### åˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹åº“

```python
from custom_model_builder import CustomModelBuilder

# åˆå§‹åŒ–æ„å»ºå™¨
builder = CustomModelBuilder()

# åˆ›å»ºæ¨¡å‹åº“
result = builder.create_custom_library(
    name="æˆ‘çš„é‡‘èæ¨¡å‹åº“",
    description="åŸºäºæˆ‘ä»¬é“¶è¡Œé¡¹ç›®çš„å®é™…ç»éªŒ",
    industry="é‡‘è",
    author="å¼ ä¸‰",
    version="v1.0.0"
)

library_id = result['library_id']
print(f"åˆ›å»ºæˆåŠŸï¼åº“ID: {library_id}")
```

#### æ·»åŠ æ¡ˆä¾‹

```python
# æ·»åŠ å•ä¸ªæ¡ˆä¾‹
builder.add_case_to_library(
    library_id=library_id,
    input_data={
        'total_data_size_gb': 1000,
        'table_count': 2000,
        'qps': 10000,
        'tps': 5000,
        'concurrent_connections': 1000,
        'need_high_availability': True,
        'need_disaster_recovery': True,
        'need_read_write_split': True,
        'data_growth_rate': 15,
        'industry': 'é‡‘è'
    },
    output_data={
        'architecture_type': 'distributed',
        'node_count': 6,
        'shard_count': 4,
        'replica_count': 2,
        'proxy_count': 2,
        'estimated_cost': 2000000
    },
    metadata={
        'scenario': 'æ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿ',
        'verified': True,
        'notes': 'æŸé“¶è¡Œå®é™…éƒ¨ç½²æ¡ˆä¾‹'
    }
)
```

#### æ‰¹é‡å¯¼å…¥æ¡ˆä¾‹

```python
# ä»æ–‡ä»¶æ‰¹é‡å¯¼å…¥
result = builder.import_cases_from_file(
    library_id=library_id,
    cases_file='my_cases.json'
)

print(f"å¯¼å…¥äº† {result['imported_count']} ä¸ªæ¡ˆä¾‹")
```

#### å¯¼å‡ºæ¨¡å‹åº“

```python
# å¯¼å‡ºä¸ºæ–‡ä»¶
builder.export_library(
    library_id=library_id,
    output_file='my_library_backup.json'
)
```

#### å¯¼å…¥æ¨¡å‹åº“

```python
# ä»æ–‡ä»¶å¯¼å…¥
result = builder.import_library('my_library_backup.json')
print(f"å¯¼å…¥æˆåŠŸï¼æ–°åº“ID: {result['library_id']}")
```

---

## ğŸ“‹ æ¡ˆä¾‹æ ¼å¼è¯´æ˜

### å®Œæ•´æ¡ˆä¾‹æ ¼å¼

```json
{
  "input": {
    "total_data_size_gb": 500,
    "table_count": 800,
    "qps": 5000,
    "tps": 2000,
    "concurrent_connections": 500,
    "need_high_availability": true,
    "need_disaster_recovery": false,
    "need_read_write_split": true,
    "data_growth_rate": 20,
    "industry": "äº’è”ç½‘"
  },
  "output": {
    "architecture_type": "distributed",
    "node_count": 4,
    "shard_count": 2,
    "replica_count": 2,
    "proxy_count": 2,
    "estimated_cost": 800000
  },
  "metadata": {
    "scenario": "ç¤¾äº¤å¹³å°",
    "verified": true,
    "notes": "å®é™…ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹",
    "deployment_date": "2024-10-01",
    "performance_rating": 4.5
  }
}
```

### å¿…å¡«å­—æ®µ

**inputï¼ˆè¾“å…¥æ•°æ®ï¼‰**:
- `total_data_size_gb`: æ•°æ®æ€»é‡
- `qps`: æ¯ç§’æŸ¥è¯¢æ•°
- `tps`: æ¯ç§’äº‹åŠ¡æ•°

**outputï¼ˆè¾“å‡ºæ•°æ®ï¼‰**:
- `architecture_type`: æ¶æ„ç±»å‹ï¼ˆstandalone/distributed/hybridï¼‰
- `node_count`: èŠ‚ç‚¹æ•°é‡

**metadataï¼ˆå…ƒæ•°æ®ï¼‰** - å¯é€‰:
- `scenario`: åº”ç”¨åœºæ™¯
- `verified`: æ˜¯å¦å·²éªŒè¯
- `notes`: å¤‡æ³¨è¯´æ˜

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. æ¡ˆä¾‹è´¨é‡

âœ… **æ¨èåšæ³•**:
- ä½¿ç”¨çœŸå®çš„ç”Ÿäº§ç¯å¢ƒæ•°æ®
- ç¡®ä¿è¾“å…¥è¾“å‡ºæ•°æ®å‡†ç¡®
- æ·»åŠ è¯¦ç»†çš„å…ƒæ•°æ®è¯´æ˜
- æ ‡æ³¨æ¡ˆä¾‹æ˜¯å¦å·²éªŒè¯

âŒ **é¿å…**:
- ä½¿ç”¨è™šæ„æˆ–ä¸å‡†ç¡®çš„æ•°æ®
- ç¼ºå°‘å…³é”®å‚æ•°
- æ²¡æœ‰åœºæ™¯è¯´æ˜

### 2. æ¨¡å‹åº“ç»„ç»‡

âœ… **æ¨èåšæ³•**:
- æŒ‰è¡Œä¸šæˆ–åœºæ™¯åˆ†ç±»åˆ›å»ºå¤šä¸ªåº“
- å®šæœŸæ›´æ–°å’Œç»´æŠ¤
- åŠæ—¶æ·»åŠ æ–°çš„å®é™…æ¡ˆä¾‹
- åšå¥½ç‰ˆæœ¬ç®¡ç†

âŒ **é¿å…**:
- æ‰€æœ‰æ¡ˆä¾‹æ··åœ¨ä¸€ä¸ªåº“
- é•¿æœŸä¸æ›´æ–°
- ç¼ºå°‘ç‰ˆæœ¬æ§åˆ¶

### 3. æ¡ˆä¾‹æ•°é‡

- **æœ€å°‘**: 5-10ä¸ªæ¡ˆä¾‹ï¼ˆåŸºæœ¬å¯ç”¨ï¼‰
- **æ¨è**: 20-50ä¸ªæ¡ˆä¾‹ï¼ˆè¾ƒå¥½æ•ˆæœï¼‰
- **ç†æƒ³**: 50+ä¸ªæ¡ˆä¾‹ï¼ˆæœ€ä½³æ•ˆæœï¼‰

### 4. æ•°æ®å¤šæ ·æ€§

ç¡®ä¿æ¡ˆä¾‹è¦†ç›–ï¼š
- ä¸åŒçš„æ•°æ®è§„æ¨¡ï¼ˆå°ã€ä¸­ã€å¤§ã€è¶…å¤§ï¼‰
- ä¸åŒçš„æ€§èƒ½è¦æ±‚ï¼ˆä½ã€ä¸­ã€é«˜ï¼‰
- ä¸åŒçš„å¯ç”¨æ€§éœ€æ±‚
- ä¸åŒçš„ä¸šåŠ¡åœºæ™¯

---

## ğŸ“Š ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: ä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“

```python
# åˆ›å»ºä¼ä¸šä¸“å±æ¨¡å‹åº“
builder.create_custom_library(
    name="XXå…¬å¸TDSQLæœ€ä½³å®è·µ",
    description="å…¬å¸å†…éƒ¨æ‰€æœ‰TDSQLé¡¹ç›®çš„ç»éªŒæ€»ç»“",
    industry="é€šç”¨",
    author="æŠ€æœ¯éƒ¨",
    version="v1.0.0"
)

# æŒç»­æ·»åŠ å…¬å¸é¡¹ç›®æ¡ˆä¾‹
# å½¢æˆä¼ä¸šçŸ¥è¯†èµ„äº§
```

### åœºæ™¯2: è¡Œä¸šä¸“å®¶åº“

```python
# åˆ›å»ºè¡Œä¸šä¸“å®¶æ¨¡å‹åº“
builder.create_custom_library(
    name="é‡‘èè¡Œä¸šTDSQLä¸“å®¶åº“",
    description="10å¹´é‡‘èè¡Œä¸šTDSQLå®æ–½ç»éªŒ",
    industry="é‡‘è",
    author="èµ„æ·±æ¶æ„å¸ˆ",
    version="v2.0.0"
)

# åˆ†äº«ç»™åŒè¡Œæˆ–å®¢æˆ·
```

### åœºæ™¯3: é¡¹ç›®æ¨¡æ¿åº“

```python
# åˆ›å»ºç‰¹å®šåœºæ™¯æ¨¡æ¿åº“
builder.create_custom_library(
    name="ç”µå•†ä¿ƒé”€åœºæ™¯æ¨¡æ¿",
    description="åŒ11ã€618ç­‰å¤§ä¿ƒåœºæ™¯çš„æ¶æ„æ–¹æ¡ˆ",
    industry="ç”µå•†",
    author="ç”µå•†å›¢é˜Ÿ",
    version="v1.0.0"
)

# å¿«é€Ÿå¤ç”¨æˆåŠŸç»éªŒ
```

---

## ğŸ”§ é«˜çº§åŠŸèƒ½

### 1. æ¨¡å‹åº“åˆå¹¶

```python
# å°†å¤šä¸ªåº“çš„æ¡ˆä¾‹åˆå¹¶
lib1_cases = builder.get_library_info('custom_lib1')['cases']
lib2_cases = builder.get_library_info('custom_lib2')['cases']

# åˆ›å»ºæ–°çš„åˆå¹¶åº“
result = builder.create_custom_library(
    name="åˆå¹¶æ¨¡å‹åº“",
    description="å¤šä¸ªåº“çš„åˆå¹¶ç‰ˆæœ¬"
)

# æ·»åŠ æ‰€æœ‰æ¡ˆä¾‹
for case in lib1_cases + lib2_cases:
    builder.add_case_to_library(
        result['library_id'],
        case['input'],
        case['output'],
        case['metadata']
    )
```

### 2. æ¡ˆä¾‹ç­›é€‰

```python
# è·å–åº“ä¿¡æ¯
library = builder.get_library_info(library_id)

# ç­›é€‰ç‰¹å®šåœºæ™¯çš„æ¡ˆä¾‹
finance_cases = [
    case for case in library['cases']
    if case['input'].get('industry') == 'é‡‘è'
]

# åˆ›å»ºç­›é€‰åçš„æ–°åº“
# ...
```

### 3. ç‰ˆæœ¬ç®¡ç†

```python
# æ›´æ–°ç‰ˆæœ¬å·
builder.update_library_metadata(
    library_id,
    {'version': 'v1.1.0'}
)

# å¯¼å‡ºä¸åŒç‰ˆæœ¬
builder.export_library(library_id, 'my_lib_v1.1.0.json')
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
model_libraries/
â”œâ”€â”€ custom/                          # è‡ªå®šä¹‰æ¨¡å‹åº“ç›®å½•
â”‚   â”œâ”€â”€ custom_20251025_170644.json # è‡ªå®šä¹‰åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ custom_20251025_171234.json
â”‚   â””â”€â”€ ...
â”œâ”€â”€ tencent_official_v2.1.0.json    # é¢„ç½®åº“æ–‡ä»¶
â”œâ”€â”€ community_finance_v1.8.3.json
â””â”€â”€ ...

custom_libraries.json                # è‡ªå®šä¹‰åº“é…ç½®
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®å®‰å…¨**
   - ä¸è¦åœ¨æ¨¡å‹åº“ä¸­åŒ…å«æ•æ„Ÿä¿¡æ¯
   - å¯¼å‡ºå‰æ£€æŸ¥æ•°æ®è„±æ•
   - æ§åˆ¶åˆ†äº«èŒƒå›´

2. **æ–‡ä»¶å¤‡ä»½**
   - å®šæœŸå¯¼å‡ºé‡è¦çš„æ¨¡å‹åº“
   - ä¿å­˜å¤šä¸ªç‰ˆæœ¬
   - ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶

3. **æ¡ˆä¾‹éªŒè¯**
   - æ·»åŠ æ¡ˆä¾‹å‰ç¡®è®¤æ•°æ®å‡†ç¡®æ€§
   - æ ‡æ³¨æ¡ˆä¾‹çš„éªŒè¯çŠ¶æ€
   - å®šæœŸreviewå’Œæ›´æ–°

4. **æ€§èƒ½è€ƒè™‘**
   - å•ä¸ªåº“å»ºè®®ä¸è¶…è¿‡1000ä¸ªæ¡ˆä¾‹
   - å¤§é‡æ¡ˆä¾‹è€ƒè™‘åˆ†åº“ç®¡ç†
   - å®šæœŸæ¸…ç†æ— æ•ˆæ¡ˆä¾‹

---

## ğŸ‰ å¿«é€Ÿç¤ºä¾‹

### å®Œæ•´æµç¨‹ç¤ºä¾‹

```python
from custom_model_builder import CustomModelBuilder

# 1. åˆ›å»ºæ„å»ºå™¨
builder = CustomModelBuilder()

# 2. åˆ›å»ºæ¨¡å‹åº“
result = builder.create_custom_library(
    name="æˆ‘çš„é¡¹ç›®ç»éªŒåº“",
    description="è¿‡å»3å¹´çš„TDSQLé¡¹ç›®ç»éªŒ",
    industry="äº’è”ç½‘",
    author="æˆ‘",
    version="v1.0.0"
)

library_id = result['library_id']

# 3. æ·»åŠ æ¡ˆä¾‹
cases = [
    {
        'input': {...},
        'output': {...},
        'metadata': {...}
    },
    # æ›´å¤šæ¡ˆä¾‹...
]

for case in cases:
    builder.add_case_to_library(
        library_id,
        case['input'],
        case['output'],
        case['metadata']
    )

# 4. å¯¼å‡ºå¤‡ä»½
builder.export_library(library_id, 'my_library_backup.json')

print("âœ… è‡ªå®šä¹‰æ¨¡å‹åº“åˆ›å»ºå®Œæˆï¼")
```

---

## ğŸ“ è·å–å¸®åŠ©

- æŸ¥çœ‹ç¤ºä¾‹: `python3 custom_model_builder.py`
- æŸ¥çœ‹æ–‡æ¡£: æœ¬æ–‡ä»¶
- Webç•Œé¢: http://localhost:5003/model_library

---

**æç¤º**: è‡ªå®šä¹‰æ¨¡å‹åº“æ˜¯æ‚¨çš„å®è´µçŸ¥è¯†èµ„äº§ï¼Œå»ºè®®å®šæœŸå¤‡ä»½å’Œæ›´æ–°ï¼
